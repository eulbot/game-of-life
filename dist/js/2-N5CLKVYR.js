(()=>{function b(t,n,e){let r=t.length-1,a=t[0].length-1;return[n==0?r:n-1,n,n>=r?0:n+1].flatMap(o=>[e==0?a:e-1,e,e>=a?0:e+1].map(i=>({c:o,r:i}))).filter(o=>!(o.c==n&&o.r==e))}function p(t,n,e){return b(t,n,e).reduce((a,o)=>a+(t[o.c][o.r]?1:0),0)}function f(t,n,e){return Array(t).fill(!1).map(()=>Array(n).fill(!1).map(()=>!!(e&&Math.random()>e)))}function c(t){let n=t.map(e=>e.slice());for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++){let a=p(n,e,r);t[e][r]==!1&&a==3&&(t[e][r]=!0),t[e][r]==!0&&!(a==2||a==3)&&(t[e][r]=!1)}return t}var l=20,u=document.getElementById("playground"),s=u.getContext("2d");function m(t){s.fillStyle="black",s.fillRect(0,1,u.width,u.height);for(let n=0;n<t.length;n++)for(let e=0;e<t[n].length;e++)s.fillStyle=t[n][e]?"black":"white",s.fillRect(n*l,e*l,l-1,l-1)}function v(){var t=!1;let n=document.body.clientWidth,e=document.body.clientHeight;u.width=n,u.height=e;var r=f(Math.ceil(n/l),Math.ceil(e/l),.85);u.addEventListener("mousedown",i=>{t=!0,a(i)}),u.addEventListener("mousemove",i=>a(i)),u.addEventListener("mouseup",()=>t=!1);function a(i){if(!t)return 0;let d=Math.floor(i.pageX/l),h=Math.floor(i.pageY/l);r[d][h]=!0,m(r)}function o(){t||(m(r),r=c(r)),setTimeout(()=>{requestAnimationFrame(o)},1e3/10)}o()}v();})();
