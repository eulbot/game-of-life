(()=>{function b(t,n,e){let r=t.length-1,o=t[0].length-1;return[n==0?r:n-1,n,n>=r?0:n+1].flatMap(u=>[e==0?o:e-1,e,e>=o?0:e+1].map(a=>({c:u,r:a}))).filter(u=>!(u.c==n&&u.r==e))}function p(t,n,e){return b(t,n,e).reduce((o,u)=>o+(t[u.c][u.r]?1:0),0)}function c(t,n,e){return Array(t).fill(!1).map(()=>Array(n).fill(!1).map(()=>!!(e&&Math.random()>e)))}function f(t){let n=t.map(e=>e.slice());for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++){let o=p(n,e,r);t[e][r]==!1&&o==3&&(t[e][r]=!0),t[e][r]==!0&&!(o==2||o==3)&&(t[e][r]=!1)}return t}var l=20,i=document.getElementById("playground"),s=i.getContext("2d");function m(t){s.fillStyle="black",s.fillRect(0,1,i.width,i.height);for(let n=0;n<t.length;n++)for(let e=0;e<t[n].length;e++)s.fillStyle=t[n][e]?"black":"white",s.fillRect(n*l,e*l,l-1,l-1)}function v(){var t=!1;let n=document.body.clientWidth,e=document.body.clientHeight;i.width=n,i.height=e;var r=c(Math.ceil(n/l),Math.ceil(e/l),.85);i.addEventListener("mousedown",a=>{t=!0,o(a)}),i.addEventListener("mousemove",a=>o(a)),i.addEventListener("touchmove",a=>{if(a.touches.length<=0)return 0;o(a.touches[0])}),i.addEventListener("mouseup",()=>t=!1);function o(a){if(!t)return 0;let h=Math.floor(a.pageX/l),d=Math.floor(a.pageY/l);r[h][d]=!0,m(r)}function u(){t||(m(r),r=f(r)),setTimeout(()=>{requestAnimationFrame(u)},1e3/10)}u()}v();})();
