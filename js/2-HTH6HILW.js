(()=>{function b(t,n,e){let r=t.length-1,a=t[0].length-1;return[n==0?r:n-1,n,n>=r?0:n+1].flatMap(o=>[e==0?a:e-1,e,e>=a?0:e+1].map(u=>({c:o,r:u}))).filter(o=>!(o.c==n&&o.r==e))}function p(t,n,e){return b(t,n,e).reduce((a,o)=>a+(t[o.c][o.r]?1:0),0)}function l(t,n,e){return Array(t).fill(!1).map(()=>Array(n).fill(!1).map(()=>!!(e&&Math.random()>e)))}function f(t){let n=t.map(e=>e.slice());for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++){let a=p(n,e,r);t[e][r]==!1&&a==3&&(t[e][r]=!0),t[e][r]==!0&&!(a==2||a==3)&&(t[e][r]=!1)}return t}function h(t,n){let e=null;return function(...r){clearTimeout(e),e=window.setTimeout(()=>t.apply(this,r),n)}}var i=20,s=document.getElementById("playground"),c=s.getContext("2d");function d(t){c.fillStyle="black",c.fillRect(0,1,s.width,s.height);for(let n=0;n<t.length;n++)for(let e=0;e<t[n].length;e++)c.fillStyle=t[n][e]?"black":"white",c.fillRect(n*i,e*i,i-1,i-1)}function m(){let t=document.body.clientWidth,n=document.body.clientHeight;return s.width=t,s.height=n,l(Math.ceil(t/i),Math.ceil(n/i),.85)}function E(){var t=m(),n=!1;window.addEventListener("resize",h(()=>{t=m()},200));function e(o){return o.touches!==void 0}["mousedown","touchstart"].forEach(o=>window.addEventListener(o,u=>{n=!0,r(e(u)?u.touches[0]:u)})),["mousemove","touchmove"].forEach(o=>window.addEventListener(o,u=>r(e(u)?u.touches[0]:u))),["mouseup","touchend"].forEach(o=>window.addEventListener(o,u=>n=!1));function r(o){if(!n)return 0;let u=Math.floor(o.pageX/i),v=Math.floor(o.pageY/i);t[u][v]=!0,d(t)}function a(){n||(d(t),t=f(t)),setTimeout(()=>{requestAnimationFrame(a)},1e3/10)}a()}E();})();
